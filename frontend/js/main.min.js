function myFunction(e){e.classList.toggle("change")}$(document).ready(function(){function e(e,t){1==t?($("#error").show(300),$(e).addClass("red")):$(e).removeClass("red")}function t(e,n){if(e){var o=$(n);"0"==o.css("opacity")?o.stop(!0).animate({opacity:"1"},50):o.animate({opacity:"0"},50),setTimeout(function(){e--,t(e,$(n))},150)}}function t(e,n){if(e){var o=$(n);"0"==o.css("opacity")?o.stop(!0).animate({opacity:"1"},50):o.animate({opacity:"0"},50),setTimeout(function(){e--,t(e,$(n))},150)}}function n(){1==$phone_input?(a.phone=$.trim($("#phone_number").val()),a.phone.length>0?$.ajax({type:"POST",url:"/frontend/system/send_sms.php",dataType:"json",data:{client:a},beforeSend:function(){$(".cssload-container").fadeIn(400)},success:function(e){"ok"==e.status?($("#status_order").text("Спасибо, ваша заявка принята!"),$("#but_order").fadeOut(400),$("#phone_number").fadeOut(400)):console.log(e),$(".cssload-container").fadeOut(400)},error:function(e,t,n){console.log("Ошибка: "+t+", "+n+"  Данные: "+e.responseText),$("#status").text("Ошибка")}}):console.log("Введите номер телефона!")):($("#phone_number").tooltip("show"),setTimeout(function(){$("#phone_number").tooltip("hide")},2500))}var o=$("#touch-menu"),i=$(".menu");$(o).on("click",function(e){e.preventDefault(),i.slideToggle()}),$(window).resize(function(){$(window).width()>767&&i.is(":hidden")&&i.removeAttr("style")}),$("body").on("click",".add_feedback, #add_feedback",function(){$("#feedback_modal").modal()}),$("body").on("click",".order",function(){$("#zakaz").modal(),form_name=$(this).parents(".homeblock").find("h3").text(),$("#form_name").attr("data-name","Название формы ** "+form_name),console.log(form_name)}),$("body").on("click",".open_all",function(){console.log($(".all_car_features").hasClass("hide_ul")),$(".all_car_features").hasClass("hide_ul")?($(".all_car_features").removeClass("hide_ul"),$(".all_car_features").addClass("show_ul"),$(".all_car_features").show(300)):($(".all_car_features").addClass("hide_ul"),$(".all_car_features").removeClass("show_ul"),$(".all_car_features").hide(300))}),$("body").on("click","p[data-sort]",function(){document.location.href.indexOf("?")>1?link=document.location.href.substring(0,document.location.href.indexOf("?")):link=document.location.href,document.location.href=link+"?sort="+$(this).data("sort")}),$phone_input=0,$user_click_change_calc_cats=0,$user_click_change_calc_product=0,$("a.fancybox").attr("data-fancybox-group","gallary").fancybox(),$(window).scroll(function(){$(this).scrollTop()>400?$(".site-button-up").fadeIn():$(".site-button-up").fadeOut()}),$(window).trigger("scroll"),$(".site-button-up").click(function(){return $("body, html").animate({scrollTop:0},500),!1}),$(window).scroll(function(){0!=$(this).scrollTop()?$("#toTop").fadeIn():$("#toTop").fadeOut()}),$("#toTop").click(function(){$("body,html").animate({scrollTop:0},800)}),$(".saves_but").click(function(){form=$(this).parents(".modal-content"),$inputs=$(form).find('[data-type="form-val"]'),$text=$(form).find('[data-type="form-text"]'),$select=$(form).find('[data-type="form-select"]');var t=[],n=[];yes=!0,button=$(this),$.each($text,function(){e($(this),!1),"yes"==$(this).data("necessarily")&&""==$.trim($(this).val())?(e($(this),!0),yes=!1):(n[n.length]=$(this).attr("id"),t[t.length]=$(this).val())}),$.each($inputs,function(o,i){e($(this),!1),"yes"==$(this).data("necessarily")&&""==$.trim($(this).val())?(e($(this),!0),yes=!1):(n[n.length]=$(this).attr("id"),t[t.length]=$(this).val())}),$.each($select,function(o,i){e($("#town_start_id_chosen a"),!1),console.log($(this)),select=$(this).find("option:selected").val(),""==select||0==select?e($("#town_start_id_chosen a"),!0):(n[n.length]=$(this).attr("id"),t[t.length]=select)}),1==yes&&($(form).find(".myform").hide(),$proc=$(form).find(".process"),$proc.fadeIn(400),$(button).fadeOut(200),$.ajax({type:"POST",url:"/frontend/php/saves.php",dataType:"json",data:{name:$(button).attr("data-name"),values:$.toJSON(t),inputs:$.toJSON(n)},success:function(e){console.log(e),"1"==e.result&&(console.log($proc),$proc.find("p").html("Спасибо за Ваш отзыв!"),$(button).fadeOut(100))},error:function(e,t,n){$(this).parents(".modal-content").html("Ошибка: "+t+", "+n+"  Данные: "+e.responseText),console.log("Ошибка: "+t+", "+n+"  Данные: "+e.responseText)}}))}),$(".sender").click(function(){form=$(this).parents('[data-type="onlineform"]'),$inputs=$(form).find('[data-type="form-val"]'),$text=$(form).find('[data-type="form-text"]'),$checkbox=$(form).find('[data-type="form-check"]'),$radio=$(form).find('[data-type="form-radio"]'),$select=$(form).find('[data-type="form-select"]');var e="";yes=!0,$.each($text,function(t,n){e+=$(this).data("name")+" ** "+$.trim($(this).val())+" ;; ",console.log($($text).eq(t)),console.log(e)}),$.each($inputs,function(n,o){"yes"==$($inputs).eq(n).data("necessarily")&&($($inputs).eq(n).hasClass("phone_mask")&&0==$phone_input&&(t(4,$($inputs).eq(n)),yes=!1),""==$.trim($($inputs).eq(n).val())&&(t(4,$($inputs).eq(n)),yes=!1)),1==yes&&(e+=$($inputs).eq(n).data("name")+" ** "+$.trim($($inputs).eq(n).val())+" ;; ")}),$.each($select,function(t,n){e+=$($select).eq(t).data("name")+" ** "+$($select).eq(t).find("option:selected").text()+" ;; "}),$.each($checkbox,function(t,n){1==$($checkbox).eq(t).prop("checked")?check="<b>Да</b>":check="<b>Нет</b>",e+=$($checkbox).eq(t).data("text")+" ** "+check+" ;; "}),$.each($radio,function(t,n){1==$($radio).eq(t).prop("checked")?check="<b>Да</b>":check="-",e+=$($radio).eq(t).data("text")+" ** "+check+" ;; "}),1==yes&&$.ajax({type:"POST",url:"/frontend/php/sender_form_universal.php",dataType:"json",data:{code:e,form_type:$(form).find('[data-type="form-type"]').data("name"),site:$(form).find('[data-type="site"]').data("name")},success:function(e){"1"==e.result?$(form).html('<p class="result-text">'+$(form).data("result-text")+"</p>"):$(form).html('<p class="result-text">Ошибка отправки заявки! <br/>Пожалуйста, позвоните нам!</p>')},error:function(e,t,n){$(form).html("Ошибка: "+t+", "+n+"  Данные: "+e.responseText),console.log("Ошибка: "+t+", "+n+"  Данные: "+e.responseText)}})}),$(".phone_mask").inputmask("+7 (999) 999-9999",{oncomplete:function(){$phone_input=1},onincomplete:function(){$phone_input=0},oncleared:function(){$phone_input=0}}),$('[data-click="close"]').click(function(){$(this).parent().fadeOut(300)});var a={phone:"",company_name:$("#online_order").data("company-name")};$(document).on("click","#but_order",function(){n()}),$("#phone_number").keyup(function(e){13==e.keyCode&&n()})});